# Pyon Security Overview

## üîê Security Considerations

Pyon files are structured using a JSON-compatible format and contain no executable code or embedded instructions.

During the decoding process:

- Reflection is used to instantiate objects based on their declared types.
- After instantiation, attributes are restored exclusively via direct assignment.
- No methods or evaluation routines are invoked, **except in a few documented cases**.

This means that decoding a `.pyon` file typically results only in the reconstruction of data structures, without any execution of custom logic from the original objects.

---

## ‚úÖ Safe Scenarios

It is safe to decode `.pyon` files that were generated by the user‚Äôs own environment using `pyon.encode()`. These files are guaranteed to follow the serialization rules defined internally, including:

- Absence of arbitrary object injection.
- Controlled and verified metadata structure.

---

## ‚ö†Ô∏è Caution When Loading External Files

Risks emerge when decoding files obtained from third parties or environments that may have altered the contents of a `.pyon` file.
Malicious actors could:

- Inject unexpected data structures into well-known types.
- Manipulate encoded fields to exploit constructor behavior in certain Python types.
- Use `File` objects to store and later trigger unsafe content if improperly handled.

For these reasons, decoding should be treated as a trust boundary. It is recommended to:

- Use `pyon.decode()` only on `.pyon` files that were generated in trusted contexts.
- Consider implementing additional allow-lists or validation layers in your own application.

---

## üö´ What Pyon Does Not Implement

The format itself does not implement:

- Encryption
- Access control
- Integrity verification

If the serialized data includes confidential or sensitive information, it is the responsibility of the implementer to apply appropriate protections, such as TLS for transport or encryption mechanisms for file storage.

---

## üß† Known Format Limitations

As a JSON-derived format, Pyon may be subject to known issues such as:

- High memory or CPU usage when processing deeply nested or very large documents
- Absence of schema validation or type enforcement during decoding

---

## üè∑Ô∏è Constructor-Based Exceptions

The following types are known to require constructor calls during decoding. These are used intentionally and are not considered unsafe per se, but may execute logic defined by their implementation:

### ‚úÖ Known-Safe Constructors (Standard Behavior)

- `decimal.Decimal`
- `datetime`, `date`, `time` (via `fromisoformat`)
- `numpy.ndarray` (safe when built from lists of primitive types)
- `pandas.DataFrame` / `pandas.Series`
- `File` (internally verified, but content may be manipulated)

### ‚ö†Ô∏è Constructor May Invoke Custom Logic

- `defaultdict` (via `default_factory`)
- `namedtuple` (can define methods or logic)
- `Enum` (may override `__new__`)

---

## üìå Summary

This design aims to offer a predictable and controlled serialization mechanism. However, implementers should evaluate and test its behavior according to the requirements and risk profile of their specific use case.

Pyon decoding is safe by design within controlled environments. Risks are isolated to external data and types with known dynamic behavior.
